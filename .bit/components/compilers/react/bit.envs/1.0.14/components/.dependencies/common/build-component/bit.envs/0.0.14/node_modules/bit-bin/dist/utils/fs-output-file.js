"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

function _bluebird() {
  const data = require("bluebird");

  _bluebird = function () {
    return data;
  };

  return data;
}

function _fsExtra() {
  const data = _interopRequireDefault(require("fs-extra"));

  _fsExtra = function () {
    return data;
  };

  return data;
}

function _constants() {
  const data = require("../constants");

  _constants = function () {
    return data;
  };

  return data;
}

var _default =
/*#__PURE__*/
function () {
  var _outputFile = (0, _bluebird().coroutine)(function* ({
    filePath,
    content,
    writeAutoGeneratedMessage = true,
    override = true
  }) {
    if (!override && _fsExtra().default.existsSync(filePath)) {
      const fileContent = _fsExtra().default.readFileSync(filePath).toString();

      if (!fileContent.includes(_constants().AUTO_GENERATED_STAMP)) return Promise.resolve(filePath);
    }

    const data = writeAutoGeneratedMessage ? _constants().AUTO_GENERATED_MSG + content : content;
    yield _fsExtra().default.outputFile(filePath, data);
    return Promise.resolve(filePath);
  });

  function outputFile(_x) {
    return _outputFile.apply(this, arguments);
  }

  return outputFile;
}();

exports.default = _default;